homeassistant:
  # Name of the location where Home Assistant is running
  name: !secret hass_home_name
  # Location required to calculate the time the sun rises and sets
  latitude: !secret hass_home_latitude
  longitude: !secret hass_home_longitude
  # Impacts weather/sunrise data (altitude above sea level in meters)
  elevation: !secret hass_home_elevation
  # metric for Metric, imperial for Imperial
  unit_system: imperial
  # Pick yours from here: http://en.wikipedia.org/wiki/List_of_tz_database_time_zones
  time_zone: America/Chicago

# CUSTOMIZATIONS

  customize:
    sensor.dark_sky_summary:
      homebridge_hidden: true
    sensor.dark_sky_apparent_temperature:
      homebridge_hidden: true
    sensor.dark_sky_daily_high_temperature:
      homebridge_hidden: true
    sensor.dark_sky_daily_high_apparent_temperature:
      homebridge_hidden: true
    sensor.dark_sky_daily_low_apparent_temperature:
      homebridge_hidden: true
    sensor.dark_sky_daily_low_temperature:
      homebridge_hidden: true
    sensor.dark_sky_daily_max_precip_intensity:
      homebridge_hidden: true
    sensor.dark_sky_daily_summary:
      homebridge_hidden: true
    sensor.dark_sky_dew_point:
      homebridge_hidden: true
    sensor.dark_sky_hourly_summary:
      homebridge_hidden: true
    sensor.dark_sky_humidity:
      homebridge_hidden: true
    sensor.dark_sky_icon:
      homebridge_hidden: true
    sensor.dark_sky_minutely_summary:
      homebridge_hidden: true
    sensor.dark_sky_nearest_storm_bearing:
      homebridge_hidden: true
    sensor.dark_sky_nearest_storm_distance:
      homebridge_hidden: true
    sensor.dark_sky_ozone:
      homebridge_hidden: true
    sensor.dark_sky_precip:
      homebridge_hidden: true
    sensor.dark_sky_precip_intensity:
      homebridge_hidden: true
    sensor.dark_sky_precip_probability:
      homebridge_hidden: true
    sensor.dark_sky_pressure:
      homebridge_hidden: true
    sensor.dark_sky_temperature:
      homebridge_hidden: true
    sensor.dark_sky_visibility:
      homebridge_hidden: true
    sensor.dark_sky_wind_bearing:
      homebridge_hidden: true
    sensor.dark_sky_wind_speed:
      homebridge_hidden: true
    switch.plugin_switch_01_switch_13_0:
      friendly_name: Garage Heater Plugin Switch
    sensor.garage_4n1_sensor_luminance_3_3:
      friendly_name: Luminance
    sensor.garage_4n1_sensor_relative_humidity_3_5:
      friendly_name: Humidity
    sensor.garage_4n1_sensor_burglar_3_10:
      friendly_name: Presence
    sensor.garage_4n1_sensor_temperature_3_1:
      friendly_name: Temperature
    switch.heaths_office_outlet_01_switch_15_0:
      friendly_name: Heath's Office Floor Lamp Outlet
    light.heaths_office_can_light_level_20_0:
      friendly_name: Heath's Office Can Light


# Show links to resources in log and frontend
# introduction:

# Enables the frontend
frontend:

http:
  # Uncomment this to add a password (recommended!)
  api_password: !secret http_password
  ssl_certificate: !secret ssl_certificate
  ssl_key: !secret ssl_key
  # Uncomment this if you are using SSL or running in Docker etc
  base_url: !secret duckdns_hostname

# Checks for available updates
updater:

logger:
  default: error
#  logs:
#    homeassistant.components.cover: info

# Discover some devices automatically
# discovery:

# Allows you to issue voice commands from the frontend in enabled browsers
# conversation:

# Enables support for tracking state changes over time.
history:

# View all events in a logbook
logbook:

# Track the sun
sun:

# Weather Prediction
# sensor:
#  platform: yr

# Text to speech
# tts:
# platform: google

# LG Living Room TV
media_player:
  platform: lg_netcast
  host: 192.168.2.152
  access_token: !secret media_center_lr_tv
  name: Living Room TV

# ecobee
ecobee:
  api_key: !secret ecobee_api_key
  hold_temp: true

# Wink Configuration
# wink:
#  email: !secret wink_email
#  password: !secret wink_password
#  access_token: !secret wink_api_key
#  client_id: !secret wink_client_id
#  client_secret: !secret wink_client_secret

sensor:
  - platform: darksky
    api_key: !secret darksky_api_key
    update_interval:
      minutes: 5
    monitored_conditions:
      - summary
      - icon
      - nearest_storm_distance
      - nearest_storm_bearing
      - precip_type
      - precip_intensity
      - precip_probability
      - temperature
      - apparent_temperature
      - dew_point
      - wind_speed
      - wind_bearing
      - cloud_cover
      - humidity
      - pressure
      - visibility
      - ozone
      - minutely_summary
      - hourly_summary
      - daily_summary
      - temperature_max
      - temperature_min
      - apparent_temperature_max
      - apparent_temperature_min
      - precip_intensity_max

  - platform: pi_hole
    host: 192.168.2.11

# ZWAVE
zwave:
  usb_path: /dev/ttyACM0
  polling_interval: 30000
  customize:
    light.heaths_office_can_light_level_20_0:
      refresh_value: true
      delay: 5
      polling_intensity: 1
    light.living_room_can__level_7_0:
      refresh_value: true
      delay: 5
      polling_intensity: 1
    light.living_room_fan_level_6_0:
      refresh_value: true
      delay: 5
      polling_intensity: 1
    light.mb_heaths_sconce_level_4_0:
      refresh_value: true
      delay: 5
      polling_intensity: 1
    light.mb_mollys_sconce_level_5_0:
      refresh_value: true
      delay: 5
      polling_intensity: 1
    light.pantry_light_level_11_0:
      refresh_value: true
      delay: 5
      polling_intensity: 1
    light.kitchen_lights_level_12_0:
      refresh_value: true
      delay: 5
      polling_intensity: 1
    light.entryway_lights_level_22_0:
      refresh_value: true
      delay: 5
      polling_intensity: 1


# mqtt:
#  broker: 127.0.0.1
#  port: 1883
#  client_id: home-assistant-1
#  username: pi
#  password: raspberry

# TEMPLATE SWITCHES

# Living Room TV Switch
switch:
  - platform: template
    switches:
      tvswitch:
        friendly_name: 'Living Room TV'
        value_template: "{{ is_state('media_player.living_room_tv', 'playing') }}"
        turn_on:
          service: homeassistant.turn_on
          entity_id: media_player.living_room_tv
        turn_off:
          service: homeassistant.turn_off
          entity_id: media_player.living_room_tv

############## BOOLEANS ###########

input_boolean:
  vacation:
    name: Vacation Mode
    initial: off
    icon: 'mdi:beach'
  heath_out_of_town:
    name: Out of Town for Work
    initial: off

# SCENES
# scene:


# GROUP DEFINITIONS AND SCREEN LAYOUT

group:
# Default View
  default_view:
    name: All
    view: yes
    entities:
      - group.house_modes
      - group.climate
      - group.all_lights
      - group.weather
      - group.pihole

# Downstairs View
  downstairs:
    name: Downstairs
    view: yes
    entities:
      - group.downstairs_lights
      - climate.downstairs
      - group.downstairs_sensors
      - group.downstairs_devices

# Upstairs View
  upstairs:
    name: Upstairs
    view: yes
    entities:
      - group.upstairs_lights
      - climate.upstairs
      - group.upstairs_sensors

# Outside View
  outside:
    name: Outside
    view: yes
    entities:
     - switch.garage_outside_driveway_light_switch_17_0
     - switch.front_flood_lights_switch_21_0
     - switch.front_door_light_switch_23_0

# Garage View
  garage:
    name: Garage
    view: yes
    entities:
     - group.garage_4n1
     - switch.plugin_switch_01_switch_13_0
     - switch.garage_overhead_lights_switch_19_0
     - switch.garage_staircase_switch_switch_16_0

# Heath’s Office View
  heaths_office:
    name: Heath’s Office
    view: yes
    entities:
      - group.heath_office

# Scripts & Automations View
  scripts_automations:
    name: Scripts & Automations
    view: yes
    entities:
#      - group.all_scripts
#      - group.all_automations
      - group.daily_automations
      - group.motion_automations
      - group.weather_automations
      - group.house_mode_automations

# Pi-Hole Group
  pihole:
    name: Pi Hole
    icon: 'mdi:server'
    entities:
      - sensor.pihole

# Thermostat Group
  climate: climate.upstairs, climate.downstairs

# Downstairs Lights Group
  downstairs_lights:
    name: Downstairs
    entities:
      - light.living_room_can__level_7_0
      - light.kitchen_lights_level_12_0
      - switch.counter_lights_switch_8_0
      - light.pantry_light_level_11_0
      - switch.staircase_lights_switch_10_0
      - light.entryway_lights_level_22_0
      - group.master_bedroom_sconces

# Downstairs Devices Group
  downstairs_devices:
    name: Devices
    entities:
      - switch.tvswitch
      - light.living_room_fan_level_6_0
      - sensor.pantry_motion_sensor_burglar_18_10

# Master Bedroom Group
  master_bedroom_lights:
    name: Master Bedroom
    entities:
      - group.master_bedroom_sconces

# Master Bedroom Sconces
  master_bedroom_sconces:
    name: Master Bedroom Sconces
    entities:
      - light.mb_heaths_sconce_level_4_0
      - light.mb_mollys_sconce_level_5_0

# Upstairs Lights Group
  upstairs_lights:
    name: Upstairs
    entities:
      - switch.staircase_lights_switch_10_0

# Heath’s Office Lights Group
  heath_office:
    name: Heath’s Office
    entities:
      - light.heaths_office_can_light_level_20_0
      - switch.heaths_office_outlet_01_switch_15_0

# Garage Sensors
  garage_4n1:
    name: Garage Sensors
    entities:
      - sensor.garage_4n1_sensor_luminance_3_3
      - sensor.garage_4n1_sensor_relative_humidity_3_5
      - sensor.garage_4n1_sensor_burglar_3_10
      - sensor.garage_4n1_sensor_temperature_3_1

# All Lights Group
  all_lights:
    name: All Lights
    entities:
      - group.downstairs_lights
      - group.upstairs_lights
      - group.heath_office

# All Scripts Group
  all_scripts:
    name: All Scripts
    entities:
      - script.timer_5
      - script.timer_10
      - script.timer_15

# All Automations Group
  all_automations:
    name: All Automations
    entities:
      - group.daily_automations
      - group.weather_automations
      - group.vacation_automations
      - group.heath_is_out_of_town_automations

# Grouping of Daily Home Automations
  daily_automations:
    name: Daily Automations
    entities:
      - automation.master_bedroom_sconces__sunset
      - automation.counter_lights__sunrise
      - automation.heaths_office__sunset
      - automation.staircase_lights__sunrise
      - automation.staircase_lights__sunset
      - automation.garage_door_driveway_light_on
      - automation.garage_door_driveway_light_off
      - automation.front_flood_lights_on
      - automation.front_flood_lights_off

# Grouping of Weather Automations
  weather_automations:
    name: Weather Automations
    entities:
      - automation.staircase_lights__low_light_conditions
      - automation.staircase_lights__weather_change
      - automation.garage_heater_on
      - automation.garage_heater_off

# Grouping of Motion Automations
  motion_automations:
    name: Motion Automations
    entities:
      - automation.pantry_light_with_motion_during_wake_hours
      - automation.pantry_light_with_motion_after_hours
      - automation.pantry_light_off
      - automation.garage_motion_sensor_on
      - automation.garage_motion_sensor_off

# Grouping of House Mode Automations
  house_mode_automations:
    name: House Mode Automations
    entities:
      - group.vacation_automations
      - group.heath_is_out_of_town_automations

# House Modes group
  house_modes:
    name: House Modes
    entities:
      - input_boolean.vacation
      - input_boolean.heath_out_of_town

# Grouping of Vacation Automations
  vacation_automations:
    name: Vacation Automations
    entities:
      - automation.living_room_on
      - automation.living_room_off
      - automation.heaths_office_off_vacation
      - automation.master_bedroom_sconces_off
      - automation.counter_lights_off
      - automation.set_thermostats_to_away_mode
      - automation.set_thermostats_to_home_mode

# Grouping of Heath is out of town Automations
  heath_is_out_of_town_automations:
    name: Out of Town for Work
    entities:
      - automation.heaths_office_off_hioot

# grouping for all downstairs sensors
  downstairs_sensors:
    name: Sensors
    entities:
      - sensor.downstairs_temperature
      - sensor.downstairs_humidity
      - binary_sensor.downstairs_occupancy
      - sensor.living_room_temperature
      - binary_sensor.living_room_occupancy
      - sensor.master_bedroom_temperature
      - binary_sensor.master_bedroom_occupancy
      - sensor.master_bathroom_temperature
      - binary_sensor.master_bathroom_occupancy
      - sensor.mollys_office_temperature
      - binary_sensor.mollys_office_occupancy

# grouping for all upstairs sensors
  upstairs_sensors:
    name: Sensors
    entities:
      - sensor.upstairs_temperature
      - sensor.upstairs_humidity
      - binary_sensor.upstairs_occupancy
      - sensor.abbys_room_temperature
      - binary_sensor.abbys_room_occupancy
      - sensor.guest_room_rear_temperature
      - binary_sensor.guest_room_rear_occupancy

# grouping for all weather sensors
  weather:
    name: DarkSky
    entities:
      - sensor.dark_sky_summary
      - sensor.dark_sky_apparent_temperature
      - sensor.dark_sky_daily_high_temperature
      - sensor.dark_sky_daily_high_apparent_temperature
      - sensor.dark_sky_daily_low_apparent_temperature
      - sensor.dark_sky_daily_low_temperature
      - sensor.dark_sky_daily_max_precip_intensity
      - sensor.dark_sky_daily_summary
      - sensor.dark_sky_dew_point
      - sensor.dark_sky_hourly_summary
      - sensor.dark_sky_humidity
      - sensor.dark_sky_icon
      - sensor.dark_sky_minutely_summary
      - sensor.dark_sky_nearest_storm_bearing
      - sensor.dark_sky_nearest_storm_distance
      - sensor.dark_sky_ozone
      - sensor.dark_sky_precip
      - sensor.dark_sky_precip_intensity
      - sensor.dark_sky_precip_probability
      - sensor.dark_sky_pressure
      - sensor.dark_sky_temperature
      - sensor.dark_sky_visibility
      - sensor.dark_sky_wind_bearing
      - sensor.dark_sky_wind_speed

# AUTOMATIONS

###################### DAILY HOUSE AUTOMATIONS ##################
automation:
- alias: Staircase Lights - Sunset
  trigger:
    platform: sun
    event: sunset
    offset: '-01:00:00'
  action:
    service: homeassistant.turn_on
    entity_id: switch.staircase_lights_switch_10_0

- alias: Staircase Lights - Sunrise
  trigger:
    platform: sun
    event: sunrise
    offset: '+01:00:00'
  action:
    service: homeassistant.turn_off
    entity_id: switch.staircase_lights_switch_10_0

- alias: Master Bedroom Sconces - Sunset
  trigger:
    platform: sun
    event: sunset
    offset: '-00:45:00'
#  condition:
#    condition: state
#    entity_id: binary_sensor.master_bedroom_occupancy
#    state: 'off'
  action:
    service: homeassistant.turn_on
    entity_id:
      - light.mb_heaths_sconce_level_4_0
      - light.mb_mollys_sconce_level_5_0
    data_template:
        brightness: '168'

- alias: Heaths Office - Sunset
  trigger:
    platform: sun
    event: sunset
    offset: '-00:37:00'
  action:
    service: homeassistant.turn_on
    entity_id: light.heaths_office_can_light_level_20_0

- alias: Counter Lights - Sunrise
  trigger:
    platform: sun
    event: sunrise
    offset: '-00:30:00'
  action:
    service: homeassistant.turn_on
    entity_id: switch.counter_lights_switch_8_0

- alias: Garage Door Driveway Light On
  trigger:
    platform: sun
    event: sunset
    offset: '-00:20:00'
  action:
    service: homeassistant.turn_on
    entity_id: switch.garage_outside_driveway_light_switch_17_0

- alias: Garage Door Driveway Light Off
  trigger:
    platform: sun
    event: sunrise
    offset: '+00:15:00'
  action:
    service: homeassistant.turn_off
    entity_id: switch.garage_outside_driveway_light_switch_17_0

- alias: Front Flood Lights On
  trigger:
    platform: sun
    event: sunset
    offset: '-00:20:00'
  action:
    service: homeassistant.turn_on
    entity_id: switch.front_flood_lights_switch_21_0

- alias: Front Flood Lights Off
  trigger:
    platform: sun
    event: sunrise
    offset: '+00:15:00'
  action:
    service: homeassistant.turn_off
    entity_id: switch.front_flood_lights_switch_21_0


############## MOTION AUTOMATIONS ################

automation 2:
# Pantry Light Automation
- alias: Pantry Light with Motion during wake hours
  trigger:
    platform: state
    entity_id: sensor.pantry_motion_sensor_burglar_18_10
    to: '8'
  condition:
    condition: time
    after: '07:00:00'
    before: '22:00:00'
  action:
    service: homeassistant.turn_on
    entity_id: light.pantry_light_level_11_0
    data_template:
        brightness: '255'

- alias: Pantry Light with Motion after hours
  trigger:
    platform: state
    entity_id: sensor.pantry_motion_sensor_burglar_18_10
    to: '8'
  condition:
    condition: time
    after: '22:00:00'
    before: '07:00:00'
  action:
    service: homeassistant.turn_on
    entity_id: light.pantry_light_level_11_0
    data_template:
        brightness: '18'

- alias: Pantry Light Off
  trigger:
    platform: state
    entity_id: sensor.pantry_motion_sensor_burglar_18_10
    to: '0'
    for:
      minutes: 1
  action:
    service: homeassistant.turn_off
    entity_id: light.pantry_light_level_11_0

- alias: Garage Motion Sensor On
  trigger:
    platform: state
    entity_id: sensor.garage_4n1_sensor_burglar_3_10
    to: '8'
  action:
    service: homeassistant.turn_on
    entity_id: switch.garage_overhead_lights_switch_19_0

- alias: Garage Motion Sensor Off
  trigger:
    platform: state
    entity_id: sensor.garage_4n1_sensor_burglar_3_10
    to: '0'
#    for:
#      minutes: 1
  action:
    service: homeassistant.turn_off
    entity_id: switch.garage_overhead_lights_switch_19_0

#- alias: Bathroom Toilet Light with Motion during wake hours
#  trigger:
#    platform: state
#    entity_id: sensor.master_bathroom_4n1_sensor_burglar_3_
#    to: '8'
#  condition:
#    condition: and
#    conditions:
#      - condition: time
#        after: '08:00:00'
#      - condition: time
#        before: '22:00:00'
#  action:
#    service: homeassistant.turn_on
#    entity_id: light.master_bathroom_toilet
#    data:
#      variables:
#        brightness: '255'
#
#- alias: Bathroom Toilet Light with Motion after hours
#  trigger:
#    platform: state
#    entity_id: sensor.master_bathroom_4n1_sensor_burglar_3_
#    to: '8'
#  condition:
#    condition: and
#    conditions:
#      - condition: time
#        after: '22:00:00'
#      - condition: time
#        before: '08:00:00'
#  action:
#    service: homeassistant.turn_on
#    entity_id: light.master_bathroom_toilet
#    data:
#      variables:
#        brightness: '49'
#
#- alias: Bathroom Toilet Light Off
#  trigger:
#    platform: state
#    entity_id: sensor.master_bathroom_4n1_sensor_burglar_3_
#    to: '0'
#    for:
#      minutes: 1
#  action:
#    service: homeassistant.turn_off
#    entity_id: light.master_bathroom_toilet

#####################  Vacation Automations For Entire House ###################
automation 4:
# Vacation mode for Living Room light
- alias: Living Room ON
  trigger:
    platform: time
    after: '17:30:00'
  condition:
    condition: and
    conditions:
      - condition: time
        after: '17:30:00'
      - condition: state
        entity_id: input_boolean.vacation
        state: 'on'
  action:
    service: homeassistant.turn_on
    entity_id:
      - light.living_room_can__level_7_0
      - light.kitchen_lights_level_12_0
    data:
      variables:
        brightness: '60'

- alias: Living Room OFF
  trigger:
    platform: time
    after: '22:47:00'
  condition:
    condition: and
    conditions:
      - condition: time
        after: '22:47:00'
      - condition: state
        entity_id: input_boolean.vacation
        state: 'on'
  action:
    service: homeassistant.turn_off
    entity_id: light.living_room_can__level_7_0

# Vacation mode for Heath’s Office light
- alias: Heaths Office OFF vacation
  trigger:
    platform: time
    after: '22:24:00'
  condition:
    condition: and
    conditions:
      - condition: time
        after: '22:24:00'
      - condition: state
        entity_id: input_boolean.vacation
        state: 'on'
  action:
    service: homeassistant.turn_off
    entity_id: light.heaths_office_can_light_level_20_0

# Vacation mode for Counter Lights
- alias: Counter Lights Off
  trigger:
    platform: time
    after: '22:57:00'
  condition:
    condition: and
    conditions:
      - condition: time
        after: '22:57:00'
      - condition: state
        entity_id: input_boolean.vacation
        state: 'on'
  action:
    service: homeassistant.turn_off
    entity_id: light.counter_lights_switch_8_0

# Away mode on for thermostats
- alias: Set Thermostats To Away Mode
  trigger:
    platform: state
    entity_id: input_boolean.vacation
    state: 'on'
  action:
    service: climate.set_away_mode
    data:
      entity_id: group.climate
      away_mode: true

# Away mode off for thermostats
- alias: Set Thermostats To Home Mode
  trigger:
    platform: state
    entity_id: input_boolean.vacation
    state: 'off'
  action:
    service: climate.set_away_mode
    data:
      entity_id: group.climate
      away_mode: false

# Vacation mode for Master Bedroom Sconces
- alias: Master Bedroom Sconces OFF
  trigger:
    platform: time
    after: '22:33:00'
  condition:
    condition: and
    conditions:
      - condition: time
        after: '22:33:00'
      - condition: state
        entity_id: input_boolean.vacation
        state: 'on'
  action:
    service: homeassistant.turn_off
    entity_id:
      - light.mb_mollys_sconce_level_5_0
      - light.mb_heaths_sconce_level_4_0


################# AUTOMATIONS FOR HEATH OUT OF TOWN FOR WORK ###############

automation 5:
# HIOOT mode for Heath’s Office light

- alias: Heaths Office OFF HIOOT
  trigger:
    platform: time
    after: '22:24:00'
  condition:
    condition: and
    conditions:
      - condition: time
        after: '22:24:00'
      - condition: state
        entity_id: input_boolean.heath_out_of_town
        state: 'on'
  action:
    service: homeassistant.turn_off
    entity_id: light.heaths_office_can_light_level_20_0

################# Weather Automations ######################
automation 6:
##### Check this one cause I don't think it's working #########
- alias: Staircase Lights - Weather Change
  trigger:
    platform: state
    entity_id: switch.staircase_lights_switch_10_0
    state: 'on'
  condition:
    condition: and
    conditions:
      - condition: sun
        before: sunset
        # Optional offset value
        before_offset: '-1:00:00'
      - condition: sun
        after: sunrise
        after_offset: '+1:00:00'
      - condition: state
        entity_id: sensor.dark_sky_icon
        state: 'clear-day'
  action:
    service: homeassistant.turn_off
    entity_id: switch.staircase_lights_switch_10_0

- alias: Staircase Lights - Low Light Conditions
  trigger:
    platform: state
    entity_id: switch.staircase_lights_switch_10_0
    state: 'off'
  condition:
    condition: or
    conditions:
      - condition: state
        entity_id: sensor.dark_sky_icon
        state: 'snow'
      - condition: state
        entity_id: sensor.dark_sky_icon
        state: 'sleet'
      - condition: state
        entity_id: sensor.dark_sky_icon
        state: 'fog'
      - condition: state
        entity_id: sensor.dark_sky_icon
        state: 'rain'
      - condition: state
        entity_id: sensor.dark_sky_icon
        state: 'cloudy'
  action:
    service: homeassistant.turn_on
    entity_id: switch.staircase_lights_switch_10_0

- alias: Garage Heater ON
  trigger:
    platform: numeric_state
    entity_id: sensor.garage_4n1_sensor_temperature_3_1
    below: 55
#  condition:
#    condition: and
#    conditions:
#      - condition: numeric_state
#        entity_id: sensor.garage_4n1_sensor_temperature_3_1
#        below: 55
#      - condition: state
#        entity_id: switch.plugin_switch_01_switch_13_0
#        state: 'off'
  action:
    service: homeassistant.turn_on
    entity_id: switch.plugin_switch_01_switch_13_0

- alias: Garage Heater OFF
  trigger:
    platform: numeric_state
    entity_id: sensor.garage_4n1_sensor_temperature_3_1
    above: 56
#  condition:
#    condition: and
#    conditions:
#      - condition: numeric_state
#        entity_id: sensor.garage_4n1_sensor_temperature_3_1
#        above: 56
#      - condition: state
#        entity_id: switch.plugin_switch_01_switch_13_0
#        state: 'on'
  action:
    service: homeassistant.turn_off
    entity_id: switch.plugin_switch_01_switch_13_0

# SCRIPTS

script:

  timer_5:
    alias: "5 Minute Timer"
    sequence:
      - delay:
          minutes: 5
      - service: homeassistant.turn_off
        data_template:
          entity_id: "{{ entity }}"

  timer_10:
    alias: "10 Minute Timer"
    sequence:
      - delay:
          minutes: 10
      - service: homeassistant.turn_off
        data_template:
          entity_id: "{{ entity }}"

  timer_15:
    alias: "15 Minute Timer"
    sequence:
      - delay:
          minutes: 15
      - service: homeassistant.turn_off
        data_template:
          entity_id: "{{ entity }}"
